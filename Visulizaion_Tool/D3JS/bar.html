<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>D3.js Bar Chart with Axis Example</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>

<body>
    <h1>柱状图与x轴</h1>
    <div id="chart"></div>

    <script>
        // 数据
        var data = [10, 20, 30, 40, 50];

        // 创建一个SVG画布
        var svg = d3.select("#chart")
            .append("svg")
            .attr("width", 400)
            .attr("height", 300);

        // 创建柱状图
        svg.selectAll("rect")
            .data(data)
            .enter()
            .append("rect")
            .attr("x", function (d, i) {
                return i * 50;
            })
            .attr("y", function (d) {
                return 300 - d * 5;
            })
            .attr("width", 40)
            .attr("height", function (d) {
                return d * 5;
            })
            .attr("fill", "blue");

        // 添加标签
        svg.selectAll("text")
            .data(data)
            .enter()
            .append("text")
            .text(function (d) {
                return d;
            })
            .attr("x", function (d, i) {
                return i * 50 + 15;
            })
            .attr("y", function (d) {
                return 300 - d * 5 - 5;
            })
            .attr("fill", "white");

        // 创建x轴的比例尺
        var xScale = d3.scaleLinear()
            .domain([0, data.length])
            .range([0, 400]);

        // 创建x轴
        var xAxis = d3.axisBottom(xScale);

        // 在画布上添加x轴
        svg.append("g")
            .attr("transform", "translate(0, 300)")
            .call(xAxis);
    </script>
</body>

</html>